version: '3.8'

services:
  router:
    build: .
    container_name: router
    ports:
      - "3301:3301"
    volumes:
      - ./router.lua:/opt/tarantool/router.lua
    command: ["tarantool", "router.lua"]
    networks:
      - tarantool_net

  storage1:
    build: .
    container_name: storage1
    ports:
      - "3302:3302"
    volumes:
      - ./storage1.lua:/opt/tarantool/storage1.lua
    command: ["tarantool", "storage1.lua"]
    networks:
      - tarantool_net

  storage2:
    build: .
    container_name: storage2
    ports:
      - "3303:3303"
    volumes:
      - ./storage2.lua:/opt/tarantool/storage2.lua
    command: ["tarantool", "storage2.lua"]
    networks:
      - tarantool_net

networks:
  tarantool_net:
    driver: bridge
